<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="./jquery.min.js"></script>
</head>

<script type="text/javascript">

    $(function () {
        let token = ''
        let role = null;
        $("#login").click(() => {
            console.log('click !')
            // let req = $.ajax({
            $.ajax({
                url: "http:127.0.0.1:19000/game/local/login",
                // data: "name=韩立&password=123",
                data: {
                    name: '韩立',
                    password: '123',
                },
                // 是否异步可以锁住浏览器
                async: false,
                cache: false,
                complete(XHR, TS) {
                    if (TS == 'success') {
                        console.log('success over!')
                        console.log(XHR)
                        let data = XHR.responseJSON;
                        role = data.role
                        token = data.token
                        console.log(role.playerItems)
                        $("#myDiv").text(XHR.responseText)
                    } else {
                        console.log('failed over!')
                    }

                    // console.log(TS)     
                }
            })
            // $("#myDiv").text(req.responseText)
        })


        $("#i001").click(() => {

            $.ajax({
                url: "http:127.0.0.1:19000/game/local/itemsOption",
                // data: "name=韩立&password=123",
                data: {
                    gameId: role.gameId,
                    token: token,
                    optionStr: 'use|i001|1'
                },
                // 是否异步可以锁住浏览器
                async: false,
                cache: false,
                complete(XHR, TS) {
                    if (TS == 'success') {
                        console.log('success over!')
                        console.log(XHR)
                        let data = XHR.responseJSON;


                        let items = JSON.stringify(data.playerItems)
                        console.log(data.playerItems)
                        $("#myDiv").text(items)
                    } else {
                        console.log('failed over!')
                    }

                    // console.log(TS)     
                }
            })
        })

        $("#i003").click(() => {

            $.ajax({
                url: "http:127.0.0.1:19000/game/local/itemsOption",
                // data: "name=韩立&password=123",
                data: {
                    gameId: role.gameId,
                    token: token,
                    optionStr: 'use|i003|1'
                },
                // 是否异步可以锁住浏览器
                async: false,
                cache: false,
                complete(XHR, TS) {
                    if (TS == 'success') {
                        console.log('success over!')
                        console.log(XHR)
                        let data = XHR.responseJSON;


                        let items = JSON.stringify(data.playerItems)
                        console.log(data.playerItems)
                        $("#myDiv").text(items)
                    } else {
                        console.log('failed over!')
                    }

                    // console.log(TS)     
                }
            })
        })
    })
</script>
<style>
    .btn {
        position: relative;
        margin-left: 50px;
        float: left;
        height: 100px;
        width: 200px;
        color: white;
        background-color: black;
    }

    #myDiv {
        position: absolute;
        top: 200px;
        height: 500px;
        width: 500px;
        color: white;
        background-color: black;
        overflow: scroll;
    }
</style>

<body>
    <div id="login" class="btn">请求数据</div>
    <div id="i003" class="btn use">用道具1</div>
    <div id="i001" class="btn use">用道具2</div>
    <div id="myDiv"></div>
</body>

</html>